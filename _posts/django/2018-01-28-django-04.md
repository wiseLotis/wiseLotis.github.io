---
layout: post
title:  "4 모델 생성"
subtitle: " django blog 모델 "
slug: "django-04" 
description: " python / django를 이용해서 아주 간단한 홈페이지 만들기! "
categories: django
google: true 
tags: [django, python, home]
comments: true 
image: "/assets/posts_title/django.jpg"
sitemap : 
 changefreq: daily
 priority: 1.0
feed : true 
---


#### models.py  

blog 를 위해서 간단하게 네가지 모델을 만들었다. 

- Category
- Post 
- Comment
- tagModel 

모델을 생성하면 데이터 베이스에 blog_모델명으로 테이블이 생성되고, 
데이터 베이스의 각 필드는 field 클래스의 인스턴스로 표현 됨. 

{% highlight ruby %}
 from django.db import models
#다른 파일에 있는걸 추가하라는 뜻. django.utils 에 있는 timezone을 추가함. 
from django.utils import timezone  

# model(:객체)을 정의하는 코드 
#클래스의 이름의 첫글자는 대문자로 써야 함. models는 Post가 장고 모델임을 읫미함. 
#장고는 Post를 데이터베이스에 저장함. 

class Board(models.Model):
	title = models.CharField(max_length=40, null=False)
	title_ko = models.CharField(max_length=40, null=False)

	def __str__(self): 
		return self.title; 

class TagModel(models.Model):
	title = models.CharField(max_length=20, null=False)

class Post(models.Model):
	author = models.ForeignKey('auth.User')
	title = models.CharField(max_length=200) #글자수가 제한된 텍스트 정의 
	content = models.TextField(default='')
	boardCd = models.ForeignKey(Board, default=1)
	hit = models.IntegerField(null=True, blank=True)
	created_date = models.DateTimeField(default = timezone.now)
	published_date = models.DateTimeField(blank=True, null=True)
	Tags = models.ManyToManyField(TagModel, blank=True)
	comments = models.PositiveSmallIntegerField(default=0, null=True)

	def publish(self): 
		self.published_date = timezone.now()
		self.save()

	def __str__(self): #__ = (dunder : double under score) _ _  
		return self.title 

class Comment(models.Model):
	post = models.ForeignKey(Post)
	author = models.CharField(max_length=10)
	author_ip = models.CharField(max_length=20, null=True)
	password = models.CharField(max_length=20)
	message = models.TextField(default='')
	created_at = models.DateTimeField(default=timezone.now)
	updated_at = models.DateTimeField(blank=True, null=True)

	def publish(self):
		self.updated_at = timezone.now()
		self.save()
{% endhighlight %}

명령창에서 migration을 한다. 
<pre>
	(myvenv) c:\django\mysite>python manage.py makemigrations
</pre>
 

<pre>
	(myvenv) c:\django\mysite>python manage.py migrate
</pre>
 
![image](/assets/posts_con/django/django_03002.png)

DB를 확인해 보자 

![image](/assets/posts_con/django/django_03003.png)


_______________________________


<pre>(myvenv) c:\django\mysite>python manage.py runserver
</pre>

127.0.0.1/8000  
 